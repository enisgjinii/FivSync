<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Cancelled - Fiverr Extractor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../styles.css">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--secondary);
        }
        .container {
            width: 500px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">⚠️ Payment Cancelled</h2>
                <p class="card-description">No worries! You can try again anytime.</p>
            </div>
            <div class="card-content">
                <div class="message">
                    <h3>What happened?</h3>
                    <p>Your payment was cancelled. This could be because:</p>
                    <ul>
                        <li>You closed the payment window</li>
                        <li>You decided not to proceed with the payment</li>
                        <li>There was a temporary issue with the payment system</li>
                    </ul>
                    <p><strong>Don't worry!</strong> You can try the payment again whenever you're ready.</p>
                </div>
                <button class="button button-primary" id="retryPayment">Try Payment Again</button>
                <button class="button button-secondary" id="openExtension">Open Extension</button>
                <button class="button button-secondary" id="closeButton">Close</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const openExtension = document.getElementById('openExtension');
            const retryPayment = document.getElementById('retryPayment');
            const closeButton = document.getElementById('closeButton');

            // Get URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const extensionId = urlParams.get('extension_id');

            // Function to open the extension
            function openExtensionInTab() {
                if (extensionId) {
                    const extensionUrl = `chrome-extension://${extensionId}/popup.html`;
                    window.open(extensionUrl, '_blank');
                } else {
                    alert('Extension ID not found. Please open the extension manually.');
                }
            }

            // Function to retry payment
            function retryPaymentProcess() {
                if (extensionId) {
                    const checkoutUrl = `chrome-extension://${extensionId}/checkout.html`;
                    window.open(checkoutUrl, '_blank');
                } else {
                    alert('Extension ID not found. Please open the extension and try payment again.');
                }
            }

            // Event listeners
            openExtension.addEventListener('click', openExtensionInTab);
            retryPayment.addEventListener('click', retryPaymentProcess);
            closeButton.addEventListener('click', () => {
                window.close();
            });
        });
    </script>
</body>
</html> 