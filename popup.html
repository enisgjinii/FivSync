<!DOCTYPE html>
<html>
<head>
  <title>Fiverr Conversation Extractor</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js" onerror="console.log('Lucide icons failed to load, using fallback icons')"></script>
  <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
      <div class="loading-spinner">
        <div class="spinner"></div>
        <p>Authenticating...</p>
      </div>
    </div>

    <!-- Authentication Container -->
    <div id="auth-container" class="auth-container">
      <div class="auth-card">
        <div class="auth-header">
          <div class="brand">
            <img src="images/logo.png" alt="Logo" class="brand-logo">
            <h1 class="brand-title">Fiverr Extractor</h1>
          </div>
          <p class="auth-subtitle">Your conversations, beautifully extracted</p>
        </div>

        <!-- Login Form -->
        <div id="login-form" class="auth-form">
          <h2 class="form-title">Welcome Back</h2>
          <p class="form-subtitle">Sign in to your account</p>
          
          <div class="form-group">
            <label for="email" class="form-label">Email Address</label>
            <div class="input-group">
              <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
              <input type="email" id="email" class="form-input" placeholder="Enter your email" required>
            </div>
          </div>

          <div class="form-group">
            <label for="password" class="form-label">Password</label>
            <div class="input-group">
              <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <circle cx="12" cy="16" r="1"></circle>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              <input type="password" id="password" class="form-input" placeholder="Enter your password" required>
              <button type="button" class="password-toggle" id="password-toggle-login" title="Toggle password visibility">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
          </div>

          <button id="login-btn" class="btn btn-primary btn-full">
            <span class="btn-text">Sign In</span>
            <div class="btn-loader" style="display: none;">
              <div class="btn-spinner"></div>
            </div>
          </button>

          <div id="auth-error" class="error-message"></div>

          <div class="auth-divider">
            <span>Don't have an account?</span>
          </div>

          <button type="button" id="show-signup" class="btn btn-ghost btn-full">
            Create Account
          </button>
        </div>

        <!-- Signup Form -->
        <div id="signup-form" class="auth-form" style="display: none;">
          <h2 class="form-title">Create Account</h2>
          <p class="form-subtitle">Start extracting conversations today</p>
          
          <div class="form-group">
            <label for="signup-email" class="form-label">Email Address</label>
            <div class="input-group">
              <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
              <input type="email" id="signup-email" class="form-input" placeholder="Enter your email" required>
            </div>
          </div>

          <div class="form-group">
            <label for="signup-password" class="form-label">Password</label>
            <div class="input-group">
              <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <circle cx="12" cy="16" r="1"></circle>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              <input type="password" id="signup-password" class="form-input" placeholder="Choose a password" required>
              <button type="button" class="password-toggle" id="password-toggle-signup" title="Toggle password visibility">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>
          </div>

          <div class="form-group">
            <label for="confirm-password" class="form-label">Confirm Password</label>
            <div class="input-group">
              <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <circle cx="12" cy="16" r="1"></circle>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              <input type="password" id="confirm-password" class="form-input" placeholder="Confirm your password" required>
            </div>
          </div>

          <div class="password-strength" id="password-strength">
            <div class="strength-bar">
              <div class="strength-fill"></div>
            </div>
            <span class="strength-text">Password strength</span>
          </div>

          <button id="signup-btn" class="btn btn-primary btn-full">
            <span class="btn-text">Create Account</span>
            <div class="btn-loader" style="display: none;">
              <div class="btn-spinner"></div>
            </div>
          </button>

          <div id="signup-error" class="error-message"></div>

          <div class="auth-divider">
            <span>Already have an account?</span>
          </div>

          <button type="button" id="show-login" class="btn btn-ghost btn-full">
            Sign In
          </button>
        </div>
      </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="main-app" style="display: none;">
      <!-- Header with User Info -->
      <header class="app-header">
        <div class="header-content">
          <div class="header-left">
            <img src="images/logo.png" alt="Logo" class="header-logo">
            <h1 class="header-title">Fiverr Extractor</h1>
          </div>
          
          <div class="header-right">
            <div class="user-info-display">
              <div class="user-avatar">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
              </div>
              <div class="user-details">
                <span id="user-email-display" class="user-email"></span>
                <div class="subscription-badge" id="subscription-badge">
                  <span class="badge-text">Loading...</span>
                </div>
              </div>
            </div>
            
            <div class="header-actions">
              <button id="refresh-status-btn" class="btn btn-icon" title="Refresh Status">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                  <path d="M21 3v5h-5"></path>
                  <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
                  <path d="M3 21v-5h5"></path>
                </svg>
              </button>
              
              <button id="settings-btn" class="btn btn-icon" title="Settings">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
              
              <div class="dropdown">
                <button id="user-menu-btn" class="btn btn-icon dropdown-trigger" title="User Menu">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="1"></circle>
                    <circle cx="19" cy="12" r="1"></circle>
                    <circle cx="5" cy="12" r="1"></circle>
                  </svg>
                </button>
                <div class="dropdown-menu" id="user-dropdown">
                  <div class="dropdown-header">
                    <span id="dropdown-user-email"></span>
                  </div>
                  <a href="#" class="dropdown-item" id="view-profile">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                      <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    View Profile
                  </a>
                  <a href="#" class="dropdown-item" id="billing-history">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                      <line x1="16" y1="2" x2="16" y2="6"></line>
                      <line x1="8" y1="2" x2="8" y2="6"></line>
                      <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    Billing History
                  </a>
                  <div class="dropdown-divider"></div>
                  <a href="#" class="dropdown-item" id="logout-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                      <polyline points="16,17 21,12 16,7"></polyline>
                      <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    Sign Out
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="app-main">
        <!-- Status Bar -->
        <div id="status-bar" class="status-bar" style="display: none;">
          <div class="status-content">
            <div class="status-icon"></div>
            <span class="status-text"></span>
          </div>
        </div>

        <!-- Pro Upgrade Section -->
        <div id="pro-upgrade-section" class="pro-upgrade-section" style="display: none;">
          <div class="upgrade-card">
            <div class="upgrade-header">
              <div class="upgrade-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
              </div>
              <h3 class="upgrade-title">Upgrade to Pro</h3>
              <p class="upgrade-subtitle">Unlock unlimited exports and premium features</p>
            </div>
            <div class="upgrade-features">
              <div class="feature-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20,6 9,17 4,12"></polyline>
                </svg>
                Unlimited exports & conversations
              </div>
              <div class="feature-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20,6 9,17 4,12"></polyline>
                </svg>
                All export formats (TXT, CSV, PDF, Excel)
              </div>
              <div class="feature-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20,6 9,17 4,12"></polyline>
                </svg>
                Advanced attachment management
              </div>
              <div class="feature-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20,6 9,17 4,12"></polyline>
                </svg>
                Bulk export all conversations
              </div>
              <div class="feature-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20,6 9,17 4,12"></polyline>
                </svg>
                Advanced search & filtering
              </div>
              <div class="feature-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20,6 9,17 4,12"></polyline>
                </svg>
                Conversation analytics & insights
              </div>
              <div class="feature-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20,6 9,17 4,12"></polyline>
                </svg>
                Custom export templates
              </div>
              <div class="feature-item">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20,6 9,17 4,12"></polyline>
                </svg>
                Priority support & updates
              </div>
            </div>
            <button id="upgrade-btn" class="btn btn-success btn-full btn-enhanced">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
              </svg>
              <span class="btn-text">Upgrade Now - $9.99/month</span>
            </button>
            <button id="view-pro-features-btn" class="btn btn-ghost btn-full">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
              <span class="btn-text">View All Pro Features</span>
            </button>
          </div>
        </div>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
          <!-- Controls Panel -->
          <div class="dashboard-card">
            <div class="card-header">
              <h3 class="card-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="3"></circle>
                  <path d="M12 1v6m0 6v6"></path>
                  <path d="m12.93 5.93 2.83-2.83"></path>
                  <path d="m18.24 12 2.83 2.83"></path>
                  <path d="m12.93 18.07 2.83 2.83"></path>
                  <path d="M1.93 12.93 4.76 10.1"></path>
                  <path d="m9.17 9.17-2.83-2.83"></path>
                  <path d="m14.83 14.83 2.83 2.83"></path>
                </svg>
                Controls
              </h3>
            </div>
            <div class="card-content">
              <div class="control-group">
                <button id="fetch-contacts-btn" class="btn btn-secondary btn-full btn-enhanced">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                  </svg>
                  <span class="btn-text">Fetch Contacts</span>
                  <span class="btn-loader" style="display: none;">
                    <div class="btn-spinner"></div>
                  </span>
                </button>
                <div id="contacts-progress" class="progress-info"></div>
              </div>
              
              <div class="control-group">
                <button id="extract-conversation-btn" class="btn btn-secondary btn-full btn-enhanced">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                  </svg>
                  <span class="btn-text">Extract Conversation</span>
                  <span class="btn-loader" style="display: none;">
                    <div class="btn-spinner"></div>
                  </span>
                </button>
                <div id="extraction-progress" class="progress-info"></div>
              </div>
            </div>
          </div>

          <!-- Export Actions -->
          <div id="export-actions-card" class="dashboard-card" style="display: none;">
            <div class="card-header">
              <h3 class="card-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7,10 12,15 17,10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                Export Options
              </h3>
              <span id="current-conversation-name" class="card-subtitle"></span>
            </div>
            <div class="card-content">
              <div class="export-grid">
                <button id="download-md-btn" class="btn btn-primary">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 1 2-2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10,9 9,9 8,9"></polyline>
                  </svg>
                  <span class="btn-text">Markdown</span>
                </button>
                
                <button id="download-json-btn" class="btn btn-secondary">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 1 2-2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                  </svg>
                  <span class="btn-text">JSON</span>
                </button>
                
                <button id="download-txt-btn" class="btn btn-secondary pro-feature">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 1 2-2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                  </svg>
                  <span class="btn-text">TXT</span>
                </button>
                
                <button id="download-csv-btn" class="btn btn-secondary pro-feature">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 1 2-2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                  </svg>
                  <span class="btn-text">CSV</span>
                </button>
              </div>
              
              <div class="export-advanced">
                <button id="view-attachments-btn" class="btn btn-ghost pro-feature">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66L9.64 16.2a2 2 0 0 1-2.83-2.83l7.07-7.07"></path>
                  </svg>
                  <span class="btn-text">View Attachments</span>
                </button>
                
                <button id="export-metadata-btn" class="btn btn-ghost pro-feature">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12,6 12,12 16,14"></polyline>
                  </svg>
                  <span class="btn-text">Export Timestamps</span>
                </button>
                
                <button id="export-pdf-btn" class="btn btn-ghost pro-feature">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 1 2-2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10,9 9,9 8,9"></polyline>
                  </svg>
                  <span class="btn-text">Export as PDF</span>
                </button>
                
                <button id="export-excel-btn" class="btn btn-ghost pro-feature">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 1 2-2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                  </svg>
                  <span class="btn-text">Export as Excel</span>
                </button>
                
                <button id="bulk-export-btn" class="btn btn-ghost pro-feature">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7,10 12,15 17,10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                  </svg>
                  <span class="btn-text">Bulk Export All</span>
                </button>
                
                <button id="analytics-btn" class="btn btn-ghost pro-feature">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 3v18h18"></path>
                    <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"></path>
                  </svg>
                  <span class="btn-text">Conversation Analytics</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Contacts List -->
          <div class="dashboard-card contacts-card">
            <div class="card-header">
              <h3 class="card-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="9" cy="7" r="4"></circle>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                Contacts
              </h3>
              <div class="search-container">
                <div class="search-input-group">
                  <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                  </svg>
                  <input type="text" id="contact-search" class="search-input" placeholder="Search contacts...">
                </div>
              </div>
            </div>
            <div class="card-content">
              <div id="contacts-list" class="contacts-list">
                <div class="empty-state">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                  </svg>
                  <h4>No contacts yet</h4>
                  <p>Click "Fetch Contacts" to load your Fiverr conversations</p>
                </div>
              </div>
              
              <!-- Pro Features Section -->
              <div id="pro-features-section" class="pro-features-section" style="display: none;">
                <div class="pro-features-header">
                  <h4>ðŸš€ Pro Features</h4>
                  <p>Unlock advanced capabilities</p>
                </div>
                <div class="pro-features-grid">
                  <div class="pro-feature-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                      <polyline points="7,10 12,15 17,10"></polyline>
                      <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    <span>Bulk Export</span>
                  </div>
                  <div class="pro-feature-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M3 3v18h18"></path>
                      <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"></path>
                    </svg>
                    <span>Analytics</span>
                  </div>
                  <div class="pro-feature-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66L9.64 16.2a2 2 0 0 1-2.83-2.83l7.07-7.07"></path>
                    </svg>
                    <span>Attachments</span>
                  </div>
                  <div class="pro-feature-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12,6 12,12 16,14"></polyline>
                    </svg>
                    <span>Timestamps</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Modal Backdrop -->
    <div id="modal-backdrop" class="modal-backdrop" style="display: none;"></div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            Settings
          </h2>
          <button id="close-settings-btn" class="btn btn-icon modal-close">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="settings-section">
            <h3 class="settings-section-title">Export Preferences</h3>
            
            <div class="form-group">
              <label for="date-format" class="form-label">Date Format</label>
              <select id="date-format" class="form-select">
                <option value="DD/MM/YYYY">DD/MM/YYYY, HH:mm:ss AM</option>
                <option value="MM/DD/YYYY">MM/DD/YYYY, HH:mm:ss AM</option>
                <option value="YYYY/MM/DD">YYYY/MM/DD, HH:mm:ss AM</option>
                <option value="DD-MM-YYYY">DD-MM-YYYY, HH:mm:ss AM</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">Theme</label>
              <div class="theme-toggle">
                <input type="checkbox" id="theme-toggle" class="toggle-input">
                <label for="theme-toggle" class="toggle-label">
                  <span class="toggle-slider"></span>
                </label>
                <span id="theme-label" class="toggle-text">Light Mode</span>
              </div>
            </div>
          </div>

          <div class="settings-section">
            <h3 class="settings-section-title">About</h3>
            <div class="about-info">
              <div class="about-item">
                <span class="about-label">Version</span>
                <span class="about-value">2.0.0</span>
              </div>
              <div class="about-item">
                <span class="about-label">Developer</span>
                <span class="about-value">Fiverr Extractor Team</span>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="settings-cancel-btn" class="btn btn-ghost">Cancel</button>
          <button id="settings-save-btn" class="btn btn-primary">Save Changes</button>
        </div>
      </div>
    </div>

    <!-- Profile Modal -->
    <div id="profile-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            Profile & Subscription
          </h2>
          <button id="close-profile-btn" class="btn btn-icon modal-close">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="profile-section">
            <div class="profile-avatar-large">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </div>
            <div class="profile-info">
              <h3 id="profile-email" class="profile-email"></h3>
              <div id="profile-subscription-status" class="profile-subscription-status"></div>
            </div>
          </div>

          <div class="subscription-details">
            <h4 class="subscription-section-title">Subscription Details</h4>
            <div class="subscription-info" id="subscription-info">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>

          <div class="usage-stats">
            <h4 class="subscription-section-title">Usage Statistics</h4>
            <div class="stats-grid">
              <div class="stat-item">
                <div class="stat-value" id="total-exports">0</div>
                <div class="stat-label">Total Exports</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="this-month-exports">0</div>
                <div class="stat-label">This Month</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="total-conversations">0</div>
                <div class="stat-label">Conversations</div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="manage-subscription-btn" class="btn btn-secondary">Manage Subscription</button>
          <button id="close-profile-footer-btn" class="btn btn-primary">Close</button>
        </div>
      </div>
    </div>

    <!-- Attachments Modal -->
    <div id="attachments-modal" class="modal" style="display: none;">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h2 class="modal-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66L9.64 16.2a2 2 0 0 1-2.83-2.83l7.07-7.07"></path>
            </svg>
            Conversation Attachments
          </h2>
          <button id="close-attachments-btn" class="btn btn-icon modal-close">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div id="attachments-content" class="attachments-content">
            <!-- Will be populated by JavaScript -->
          </div>
        </div>
      </div>
    </div>

    <!-- Pro Features Modal -->
    <div id="pro-features-modal" class="modal" style="display: none;">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h2 class="modal-title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
            Pro Features Overview
          </h2>
          <button id="close-pro-features-btn" class="btn btn-icon modal-close">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="pro-features-overview">
            <div class="feature-category">
              <h3>ðŸ“Š Export Formats</h3>
              <div class="feature-list">
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 1 2-2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                  </svg>
                  <span>PDF Export</span>
                </div>
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 1 2-2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                  </svg>
                  <span>Excel Export</span>
                </div>
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 1 2-2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                  </svg>
                  <span>CSV Export</span>
                </div>
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 1 2-2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                  </svg>
                  <span>TXT Export</span>
                </div>
              </div>
            </div>
            
            <div class="feature-category">
              <h3>ðŸš€ Advanced Features</h3>
              <div class="feature-list">
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7,10 12,15 17,10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                  </svg>
                  <span>Bulk Export All Conversations</span>
                </div>
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66L9.64 16.2a2 2 0 0 1-2.83-2.83l7.07-7.07"></path>
                  </svg>
                  <span>Advanced Attachment Management</span>
                </div>
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12,6 12,12 16,14"></polyline>
                  </svg>
                  <span>Detailed Timestamps & Metadata</span>
                </div>
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 3v18h18"></path>
                    <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"></path>
                  </svg>
                  <span>Conversation Analytics & Insights</span>
                </div>
              </div>
            </div>
            
            <div class="feature-category">
              <h3>âš¡ Performance & Support</h3>
              <div class="feature-list">
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                  <span>Unlimited Exports & Conversations</span>
                </div>
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                  <span>Priority Support & Updates</span>
                </div>
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                  <span>Advanced Search & Filtering</span>
                </div>
                <div class="feature-item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                  <span>Custom Export Templates</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="upgrade-pro-btn" class="btn btn-success btn-full">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
            <span class="btn-text">Upgrade to Pro - $9.99/month</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="firebase-app-lib.js"></script>
  <script src="firebase-auth-lib.js"></script>
  <script src="firebase-firestore-lib.js"></script>
  <script src="firebase-auth.js"></script>
  <script src="popup.js"></script>
</body>
</html>
